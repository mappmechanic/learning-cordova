<network class="app-page">
    <header class="header-bar">
        <div class="center">
            <button class="btn pull-left icon icon-arrow-back" data-navigation="$previous-page"></button>
            <h1 class="title">Network Plugin</h1>
        </div>
    </header>

    <div class="content">
        <div class="padded-full">
            <h3>Events Testing</h3>
		</div>
			<ul class="list">
			   <li class="divider">Connection Type</li>
			   <li class="padded-list" id="connection_type">Unkown</li>
			   <li class="divider">Connection Status</li>
			   <li class="padded-list">
					<div id="light" class="circle">
					</div>
					<span id="network_status">Unkown</span>
			   </li>
		   </ul>
    </div>
</newtork>

<script>
	/*
	 * JavaScript code can be executed when the template is loaded
	 */
    deviceReady(function() {
		console.log('Device is Ready');
		document.addEventListener('online',onOnline,false);
		document.addEventListener('offline',onOffline,false);

		if(navigator.connection.type === Connection.UNKNOWN || navigator.connection.type === Connection.NONE){
			onOffline();
		}else {
			onOnline();
		}

		function onOnline(){
			console.log('Now Online');
			$('#network_status').html('Online');
			$('#light').addClass('online');
			$('#light').removeClass('offline');
			$('#connection_type').html(checkConnectionType());
		}

		function onOffline(){
			console.log('Now Offline');
			$('#network_status').html('Offline');
			$('#light').addClass('offline');
			$('#light').removeClass('online');
			$('#connection_type').html(checkConnectionType());
		}

		function checkConnectionType(){
			var networkState = navigator.connection.type;

		    var states = {};
		    states[Connection.UNKNOWN]  = 'Unknown connection';
		    states[Connection.ETHERNET] = 'Ethernet connection';
		    states[Connection.WIFI]     = 'WiFi connection';
		    states[Connection.CELL_2G]  = 'Cell 2G connection';
		    states[Connection.CELL_3G]  = 'Cell 3G connection';
		    states[Connection.CELL_4G]  = 'Cell 4G connection';
		    states[Connection.CELL]     = 'Cell generic connection';
		    states[Connection.NONE]     = 'No network connection';

		    return states[networkState];
		}
	});
</script>
